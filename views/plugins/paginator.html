@nospaces
@eval

// init
$page = isset($page) ? ((int)$page) : 1;
$pages = isset($pages) ? ((int)$pages) : 1;
$link = isset($link) ? ((string)$link) : '';
$size_dynamic = isset($size_dynamic) ? ((int)$size_dynamic) : 1;
$size_static = isset($size_static) ? ((int)$size_static) : 1;

// borders
$dynamic_left = max($page - $size_dynamic, $size_static + 1);
$dynamic_right = min($page + $size_dynamic, $pages - $size_static);

// functions
if (!function_exists('__paginatorShowPage')) {
	// print page link
	function __paginatorShowPage($title, $page, $active, $link) {
		$link = str_replace('%page%', $page, $link);

		echo '<a ';

		echo 'class="paginator__button';
		if (!$active) echo ' paginator__button--inactive ';
		echo '" ';

		if ($active) {
			echo 'href="'.$link.'" ';
		}

		echo '>' . $title . '</a>';
	}

	// print pages rang
	function __paginatorAddRange($from, $to, $page, $link) {
		for ($i = $from; $i <= $to; ++$i) {
			__paginatorShowPage($i, $i, $i != $page, $link);
		}
	}
}

// template
@endeval
<div class="paginator__wrapper">
	<div class="paginator__prev">
	{!!__paginatorShowPage('←', $page - 1, $page > 1, $link)!!}
	</div>

	<div class="paginator__pages">
	@if ($pages <= (($size_static * 2) + 1))
		{!!__paginatorAddRange(1, $pages, $page, $link)!!}
	@else
		{!!__paginatorAddRange(1, $size_static, $page, $link)!!}
        
        @if (($size_static + 1) < $dynamic_left)
			{!!__paginatorShowPage('...', 0, false, '')!!}
        @endif

		{!!__paginatorAddRange($dynamic_left, $dynamic_right, $page, $link)!!}

        @if (($pages - $size_static) > $dynamic_right)
			{!!__paginatorShowPage('...', 0, false, '')!!}
        @endif

		{!!__paginatorAddRange($pages - $size_static + 1, $pages, $page, $link)!!}
    @endif
	</div>

	<div class="paginator__next">
	{!!__paginatorShowPage('→', $page + 1, $page < $pages, $link)!!}
	</div>
</div>
@endnospaces