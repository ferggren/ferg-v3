@extends('site.base')

@section('site_title')
{{Lang::get('site.title_storage')}} // @parent
@stop

@section('site_content')
<div id="__storage">
	<div class="nice-form__loader"></div>
</div>

<br /><br />

<button id="__storage_photo">Select photo</button>
<button id="__storage_all">Select file</button>

<div>
	<br /><br /><br /><br /><br /><br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />
	some text<br />

</div>
<script>
	var storage = new Storage({
		container: "__storage",

		onselect: function(file) {
			console.log('inline select', file);
		},

		onupload: function(file) {
			console.log('inline upload', file);
		},
	});

	document.getElementById('__storage_photo').onclick = function() {
		var container = document.createElement('div');
		var storage = new Storage({
			container: container,
			admin_mode: false,

			onselect: function(file) {
				console.log('popup click', file);
			},

			onupload: function(file) {
				console.log('popup upload', file);
			},

			upload: {
				media: ['photo', 'video'],
				photo_protection: true,
				access: "public",
				group: "storage",
			},

			display: {
				media: ['photo'],
				group: 'storage',
				show_groups: true,
			},
		});

		var popup = Popup.createWindow({
			content: container,
			onclose: function() {
				storage.destroy();
			}
		});
	}

	document.getElementById('__storage_all').onclick = function() {
		var container = document.createElement('div');
		var storage = new Storage({
			container: container,
			admin_mode: false,

			onselect: function(file) {
				console.log('popup click', file);
			},

			onupload: function(file) {
				console.log('popup upload', file);
			},

			display: {
				show_groups: true,
			},
		});

		var popup = Popup.createWindow({
			content: container,
			onclose: function() {
				storage.destroy();
			}
		});
	}
</script>
@stop